-- NEDC Project: Smart Planter IoT System
-- Database: Supabase (PostgreSQL)
-- Table: readings
-- Purpose: Stores telemetry data from ESP32 sensors

-- 1. Create the table
create table public.readings (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  moisture int2,       -- Soil moisture percentage (0-100)
  temperature float4,  -- Temperature in Fahrenheit
  humidity float4      -- Air humidity percentage
);

-- 2. Add a comment for documentation (Good for judges to see)
comment on table public.readings is 'Historical sensor data from the ESP32 Smart Planter';

-- 3. (Optional) Disable Row Level Security (RLS) for the prototype phase
--    WARNING: Turn this back on and configure policies before the final competition!
alter table public.readings disable row level security;
